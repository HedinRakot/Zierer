define(["base/base-view","lr!base/resources/base-edit-model-view","mixins/kendo-widget-form","mixins/kendo-validator-form","mixins/bound-form"],function(e,n,i,t,a){"use strict";var o=function(e){e.preventDefault();var n=this;n.validate()&&n.save()},s=function(e){e.preventDefault();var i=this;require(["base/confirmation-view"],function(e){var t=new e({title:n.removeRecord,message:n.removeConfirmation});i.listenToOnce(t,"continue",function(){i.model.destroy({success:function(){location.hash=i.cancelAction}})}),i.addView(t),i.$el.append(t.render().$el)})},c=function(e){e.preventDefault();var n=this;n.changed?require(["base/confirmation-view"],function(e){var i=new e({title:"Warnung",message:"Es sind nicht gespeicherte Änderungen vorhanden. Möchten Sie die Seite trotzdem verlassen?"});n.listenToOnce(i,"continue",function(){n.cancel()}),n.addView(i),n.$el.append(i.render().$el)}):n.cancel()},r=function(e){require(["base/confirmation-view"],function(i){var t=new i({title:n.concurencyTitle,message:n.concurencyMessage});e.listenToOnce(t,"continue",function(){location.reload()}),e.addView(t),e.$el.append(t.render().$el)})},l=e.extend({cancelAction:null,bindings:null,changed:!1,render:function(){l.__super__.render.apply(this,arguments);var e=this;return e.listenTo(e.model,"change",function(){e.changed=!0}),this.$el.on("click.base-edit-model-view",".save",_.bind(o,this)),this.$el.on("click.base-edit-model-view",".remove",_.bind(s,this)),this.$el.on("click.base-edit-model-view",".cancel",_.bind(c,this)),this.$("[data-localized=add]").html(n.add),this.$("[data-localized=cancel]").html(n.cancel),this.$("[data-localized=save]").html(n.save),this.$("[data-localized=delete]").html(n["delete"]),this},close:function(){return this.$el.off(".base-edit-model-view"),l.__super__.close.apply(this,arguments),this},save:function(){var e=this;e.model.save({},{success:function(){e.changed=!1,e.model.isNew()||require(["base/information-view"],function(n){var i=new n({title:"Information speichern",message:"Information wurde erfolgreich gespeichert."});e.addView(i),e.$el.append(i.render().$el)}),e.trigger("base-edit-model-view:save",e.model)},error:function(n,i){"Conflict"==i.statusText&&r(e),e.validateResponse(i)}})},cancel:function(){}});return l.mixin(a),l.mixin(t),l.mixin(i),l});
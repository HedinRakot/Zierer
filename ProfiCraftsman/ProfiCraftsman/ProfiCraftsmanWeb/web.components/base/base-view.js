define(["kendo.backbone/kendo.backbone.viewevents"],function(e){"use strict";var i=function(e){var i=this.prototype;_.defaults(i,e),_.defaults(i.events,e.events),t.call(this,i,e,"initialize"),t.call(this,i,e,"render"),t.call(this,i,e,"close")},t=function(e,i,t){if(!_.isUndefined(i[t])){var s=e[t];e[t]=function(){var e=s.apply(this,arguments);return i[t].apply(this,arguments),e}}},s=Backbone.View.extend({kendoUIEvents:null,initialize:function(e){this.options=e},render:function(){var i=this,t=_.template(i.template);return s.__super__.render.apply(i,arguments),i.$el.html(t(i.model?i.model.toJSON():{})),i.$("[data-permission]").each(function(e,i){var t=$(i),s=t.data("permission"),n=Application.user.get("permissions");n&&-1!=n.indexOf(s)||t.hide()}),e.delegate(this),this},addView:function(e){this.views=this.views||[],this.views.push(e)},close:function(){this.views&&_.each(this.views,function(e){e.closed||e.close()}),this.trigger("close"),e.undelegate(this),this.off(),this.remove(),this.closed=!0},showView:function(e,i){i=this.$(i),this.addView(e),this.viewBySelector=this.viewBySelector||{};var t=this.viewBySelector[i.selector];t&&!t.closed&&t.close(),this.viewBySelector[i.selector]=e,i.html(e.render().$el)}},{mixin:i});return s});
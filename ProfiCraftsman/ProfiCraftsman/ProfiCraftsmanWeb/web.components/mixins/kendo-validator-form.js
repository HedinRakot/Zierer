define(["lr!mixins/resources/kendo-validator-form","kendo/kendo.validator"],function(e){"use strict";var t={render:function(){var t=this,a=t.$("form"),r=Object.getPrototypeOf(t.model).fields;_.isObject(r)&&_.each(r,function(e,r){if(r){var n=a.find("[name="+r+"]"),i=e.validation;t.$(".k-invalid-msg[data-for="+r+"]").length||n.after('<br /><span class="k-invalid-msg" data-for="'+r+'"/>'),i&&i.required&&n.attr("required",!0),i&&i.email&&n.attr("type","email"),i&&i.date&&n.attr("data-date",!0),i&&i.integer&&n.attr("data-integer",!0),i&&i.maxLength&&n.attr("data-maxlength",i.maxLength)}}),t.validator=a.kendoValidator({validateOnBlur:!1,messages:{required:e.required,email:e.email,date:e.date,integer:e.integer,maxLength:function(t){var a=Number(t.data("maxlength"));return e.maxLength.replace("%maxLength%",a)},modelState:function(e){var a=t.modelState["model."+e.attr("name")][0];return t.resources&&t.resources[a]?a=t.resources[a]:t.validator.options.messages[a]&&(a=t.validator.options.messages[a]),a}},rules:{modelState:function(e){return!t.modelState||!t.modelState["model."+e.attr("name")]},date:function(e){if(e.data("date")===!0){var t=e.val();if(t)return!!kendo.parseDate(e.val())}return!0},integer:function(e){if(e.data("integer")===!0){var t=e.val();if(t){var a=kendo.parseFloat(t);return a===Math.ceil(a)}}return!0},maxLength:function(e){var t=Number(e.data("maxlength"));if(!isNaN(t)){var a=e.val();return a.length<=t}return!0}}}).data("kendoValidator")},validate:function(){return this.validator.validate()},validateResponse:function(e){e&&e.responseJSON&&e.responseJSON.modelState&&(this.modelState=e.responseJSON.modelState,this.validate(),delete this.modelState)}};return t});